# 项目环境和用户表设计

## 项目环境

我们首先打开 iterm，使用 laravel 创建新的项目：

```
laravel new zhihu-app
```

等待一下就可以创建新的项目，我们可以看到它正在下载 laravel

下载之后我们打开文件夹：

```
cd zhihu-app
```

我们使用 vscode 或者 phpstorm 打开它，将 app 目录设置为 source 目录。

首先我们到 `.env` 编辑数据库相关配置：

```
DB_CONNECTION=mysql
DB_HOST=127.0.0.1
DB_PORT=3306
DB_DATABASE=zhihuapp
DB_USERNAME=root
DB_PASSWORD=root
```

 在配置完 mysql 选项之后，我们打开 sequel pro 数据库管理工具，首先连接到数据库，然后新建一个 zhihuapp 数据库，这样我们的项目就可以使用这个数据库，使用 utf-8 格式。

这些配置之后，我们要设置一个 homestead.yaml 配置文件，配置一个路径，使得我们可以在浏览器中看到这个项目，修改之后，重启 vagrant 就好了。

当然我们不要忘记配置 /etc/hosts 文件夹去配置 192.168.10.0 zhihuapp 

以上，我们就正确配置完项目了。

## 用户表设计

现在我们打开知乎，参照用户界面，设计我们的用户表。

用户信息包括：

1. 头像
2. 问题数
3. 回答数
4. 评论数
5. 收藏
6. 喜欢
7. 关注
8. 被关注

想好这些之后就可以在打开 migration文件夹配置 create_users 文件了：

```mysql
$table->increments('id');
$table->string('name')->unique();
$table->string('email')->unique();
$table->string('password');

$table->string('avatar');
$table->string('confirmation_token'); // 配合邮箱验证
$table->smallInteger('is_active')->default(0); // 是否激活邮箱
$table->integer('questions_count')->default(0);
$table->integer('answers_count')->default(0);
$table->integer('comments_count')->default(0);
$table->integer('favorites_count')->default(0);
$table->integer('like_count')->default(0);
$table->integer('followers_count')->default(0);
$table->integer('followings_count')->default(0);a

$table->rememberToken();
$table->timestamps();
```

添加字段可以节省很多开发代码的时间，十分方便。

以上就是用户表的基本字段信息了。

关于用户设置，我们可以借助 laravel 的功能这样定义：

```mysql
$table->json('settings')->nullable();
```

这样子我们的用户字段就可以认为操作完毕了，然后执行 php 命令：

```php
php artisan migrate
```

这样子就可以在 sequel 中看到用户表了。



