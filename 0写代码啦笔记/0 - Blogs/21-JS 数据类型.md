# JavaScript 中的数据类型

编程语言都有内建的数据结构，但是各种编程语言的数据结构常有不同之处。我们来看看 JavaScript 中内建的数据结构及其属性，它们可以用来构建其他的数据结构。

## 动态类型

JavaScript 是一种弱类型或者说动态语言，这意味着我们不需要声明变量类型，程序在运行过程中，类型会被自动确定，这也意味着你可以使用同一个变量保存不同类型的数据：

```js
var foo = 42; // Number
foo = "bar"; // String
foo = true; // Boolean
```

## 零、数据类型

最新的 ECMAScript 定义了 7 种数据类型：

- 原始类型（6 种）：
  - Boolean
  - Null
  - Undefined
  - Number
  - String
  - Symbol（ES6 新定义）
- 复杂类型（1 种）：
  - Object

## 一、null

## 二、undefined

## 三、bool

## 四、Number

## 五、String

## 六、Symbol

## 七、Object

### 7.1 











## 原始值（primitive values）

除了 Object 之外的所有类型都是不可变的（值本身无法别改变）。比如 JavaScript 中字符串是不可变的（JavaScript 中对字符串的操作一定返回了一个新的字符串，原来的字符串并没有被改变）。我们把这种类型的值称为 “原始值”。

### Boolean 类型

布尔表示一个逻辑实体，可以由两个值：`true` 和 `false`。

### Null 类型

Null 类型只有一个值：`null`。

### Undefined 类型

一个没有被赋值的变量会有个默认值： `undefined`。

### Number 类型

根据 ECMAScript 标准，JavaScript 只有一种数字类型，基于 IEEE 745 标准的双精度 64 位二进制格式的值（-(2^63 -1) 到 2^63 -1）。它并没有为整数设计一种特定的类型。除了能够表示浮点数之外，还有一些带符号的值：`+Infinity`、`-Infinity` 和 `NaN`（非数值，Not-a-Number）。

检查是否大于或小于 `+/-Infinity`：

- Number.MAX_VALUE
- Number.MIN_VALUE

另外在 ECMAScript 中我们可以通过 `Number.isSafeInteger()` 方法还有 `Number.MAX_SAFE_INTEGER` 和 `Number.MIN_SAFE_INTEGER` 来检查是否在双精度浮点数取值范围内。超出范围则数字不再安全，JavaScript 中只能正确表现双精度数值。

Number 类型只有一个整数，它可以被表示为 `+0` 和 `-0`（`0` 只是 `+0` 的简写），实践当中，`+0 === -0` 为真，唯一要注意的是除以 0 的时候：

```js
42 / +0; // Infinity
42 / -0; // -Infinity
```

JavaScript 提供了一些位运算，但是不推荐使用，因为它会使得代码难以阅读、理解和维护。位操作只应该是用来优化尺寸的最后选择。

### String 类型

字符串类型用于表示文本类型，它是一组 16 为的无符号整数值的 “元素”。字符串中每个元素占据了字符串的位置（第一个元素索引为 0，第二个为 1，以此类推），字符串长度是它元素的数量。

不同于类 C 语言，JavaScript 字符串是不可更改的。这意味着字符串一旦被创建，就不能被修改。但是，可以基于对原始字符串的操作来创建新的字符串。

- 获取一个字符串的子串可通过选择个别字母或者使用 `String.substr()`
- 两个字符串的连接使用连接操作符（`+`）或者 `String.concat()`

可以用字符串来表达复杂的数据，以下是一些很好的性质：

- 容易连接构造复杂的字符串
- 字符串容易被调试（你看到的往往在字符串里）
- 字符串通常是许多 APIs 的常见标准，而且它只能与字符串一同使用。

按照惯例, 字符串一般可以用来表达任何数据结构。这不是一个好主意。例如，使用一个分隔符，一个可以模仿一个列表(一个JavaScript的数组可能更适合一些) 。不幸的是，当一个分隔符在用于列表中的元素时，打乱了这个列表。 一个转义字符等。所有这些惯例都变成了一个不存在的维护负担而没有正确的工具使用。

表达文本数据和符号数据时候推荐使用字符串。当表达复杂的数据时，使用字符串解析和适当的缩写。

### Symbol 类型

符号类型是 ES6 新定义的，符号类型是唯一的并且是不可修改的，并且也可以用来作为 Object 的 key 值。可以将它看作是 C 中的枚举类型。

## Object

计算机科学中，对象是指内存中的可以被标识符引用的一块区域。

### 属性

JavaScript 中，对象可以被看作是一组属性的集合。用对象字面量（可以理解为关联数组）来定义一个对象时，会自动初始化一组属性。

比如你这样定义`var a = "Hello"`，那么 a 本身就会拥有 `a.substring()` 方法以及 `a.length` 属性；如果这样子 `var a = {}` 定义一个对象，它会自动拥有 `a.hasOwnProperty` 以及 `a.constructor` 等属性和方法。

这些自动初始化的属性可以被自动增减，属性的值可以是任意类型，包括具有复杂数据结构的对象。属性使用键（key）来标识，它的键值可以是一个字符串或者符号值。

ECMAScript 定义的对象中有两种属性：数据属性和访问器属性

### 数据属性

数据属性是键值对，并且每个数据属性拥有下列特性：

| 特性             | 数据类型           | 描述                                                         | 默认值    |
| ---------------- | ------------------ | ------------------------------------------------------------ | --------- |
| [[Value]]        | 任何Javascript类型 | 包含这个属性的数据值。                                       | undefined |
| [[Writable]]     | Boolean            | 如果该值为 `false，`则该属性的 [[Value]] 特性 不能被改变。   | true      |
| [[Enumerable]]   | Boolean            | 如果该值为 `true`，则该属性可以用 for...in 循环来枚举。      | true      |
| [[Configurable]] | Boolean            | 如果该值为 `false`，则该属性不能被删除，并且 除了 [[Value]] 和 [[Writable]] 以外的特性都不能被改变。 | true      |

### 访问器属性

| 特性             | 类型                   | 描述                                                         | 默认值    |
| ---------------- | ---------------------- | ------------------------------------------------------------ | --------- |
| [[Get]]          | 函数对象或者 undefined | 该函数使用一个空的参数列表，能够在有权访问的情况下读取属性值。另见 get。 | undefined |
| [[Set]]          | 函数对象或者 undefined | 该函数有一个参数，用来写入属性值，另见 set。                 | undefined |
| [[Enumerable]]   | Boolean                | 如果该值为 `true`，则该属性可以用 for...in 循环来枚举。      | true      |
| [[Configurable]] | Boolean                | 如果该值为 `false`，则该属性不能被删除，并且不能被转变成一个数据属性。 | true      |

### 对象和函数

一个 JavaScript 对象就是键和值之间的映射，键是一个字符串（或者 Symbol），值可以是任意类型的值。这使得对象非常符合哈希表

而函数就是一个附带可被调用功能的常规对象。

### 日期

使用内建的 `Date` 对象。

### 有序集：数组和类型数组

数组是一种使用整数作为键（`integer-key-ed`）属性和长度（`length`）属性之间关联的常规对象。除此之外，数组对象还继承了 `Array.prototype` 的一些操作数组的便携方法。例如 `indexOf` 和 `push`。这使得数组是表示列表或者集合的最优选择。

类型数组是 ES6 中新定义的 JavaScript 内建对象，提供了一个基本的二进制数据缓冲区的类数组视图。

### 键控集: Maps, Sets, WeakMaps, WeakSets[节](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Data_structures#%E9%94%AE%E6%8E%A7%E9%9B%86_Maps_Sets_WeakMaps_WeakSets)

这些数据结构把对象的引用当作键，其在ECMAScript第6版中有介绍。当 [`Map`](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Map) 和 [`WeakMap`](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/WeakMap)把一个值和对象关联起来的时候， [`Set`](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Set) 和 [`WeakSet`](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/WeakSet) 表示一组对象。 Map和WeakMaps之间的差别在于，在前者中，对象键是可枚举的。这允许垃圾收集器优化后面的枚举(This allows garbage collection optimizations in the latter case)。

在纯ECMAScript 5下可以实现Maps和Sets。然而，因为对象并不能进行比较（就对象“小于”示例来讲），所以查询必定是线性的。他们本地实现（包括WeakMaps）查询所花费的时间可能是对数增长。

通常，可以通过直接在对象上设置属性或着使用data-*属性，来绑定数据到DOM节点。然而缺陷是在任何的脚本里，数据都运行在同样的上下文中。Maps和WeakMaps方便将数据私密的绑定到一个对象。 

### 结构化数据: JSON[节](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Data_structures#%E7%BB%93%E6%9E%84%E5%8C%96%E6%95%B0%E6%8D%AE_JSON)

JSON (JavaScript Object Notation) 是一种轻量级的数据交换格式，来源于 JavaScript 同时也被多种语言所使用。 JSON 用于构建通用的数据结构。参见 [JSON](https://developer.mozilla.org/en-US/docs/Glossary/JSON) 以及 [`JSON`](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/JSON) 了解更多。

### 标准库中更多的对象[节](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Data_structures#%E6%A0%87%E5%87%86%E5%BA%93%E4%B8%AD%E6%9B%B4%E5%A4%9A%E7%9A%84%E5%AF%B9%E8%B1%A1)

JavaScript 有一个内置对象的标准库。请查看[参考](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects)来了解更多对象。



