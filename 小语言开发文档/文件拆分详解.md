# 项目目录

我们现在来拆分整个项目的 src 目录：

```
.
|-- App.vue
|-- ElementUI.js
|-- api
|   |-- cacheService.js
|   `-- index.js
|-- assets
|   |-- fonts
|   |   `-- iconfont.css
|   `-- images
|       `-- avatar.jpg
|-- common
|   |-- pageDesign
|   |   |-- gridSize.vue
|   |   |-- index.js
|   |   |-- pageDesign.vue
|   |   |-- panel
|   |   |   |-- imgListWrap.vue
|   |   |   |-- imgWaterFall.vue
|   |   |   |-- shapeListWrap.vue
|   |   |   |-- stylePanel.vue
|   |   |   |-- textListWrap.vue
|   |   |   `-- widgetPanel.vue
|   |   |-- refLine.vue
|   |   |-- sizeControl.vue
|   |   |-- styleWidgets
|   |   |   |-- bgImgSelect.vue
|   |   |   |-- colorSelect.vue
|   |   |   |-- iconItemSelect.vue
|   |   |   |-- numberInput.vue
|   |   |   |-- numberSlider.vue
|   |   |   |-- settingSwitch.vue
|   |   |   |-- textInput.vue
|   |   |   |-- textInputArea.vue
|   |   |   `-- valueSelect.vue
|   |   |-- widgets
|   |   |   |-- pageStyle.vue
|   |   |   |-- wCircle
|   |   |   |   |-- wCircle.vue
|   |   |   |   `-- wCircleStyle.vue
|   |   |   |-- wGroup
|   |   |   |   |-- wGroup.vue
|   |   |   |   `-- wGroupStyle.vue
|   |   |   |-- wImage
|   |   |   |   |-- wImage.vue
|   |   |   |   `-- wImageStyle.vue
|   |   |   |-- wLine
|   |   |   |   |-- wLine.vue
|   |   |   |   `-- wLineStyle.vue
|   |   |   |-- wRectangle
|   |   |   |   |-- wRectangle.vue
|   |   |   |   `-- wRectangleStyle.vue
|   |   |   `-- wText
|   |   |       |-- wText.vue
|   |   |       `-- wTextStyle.vue
|   |   `-- zoomControl.vue
|   `-- toast
|       |-- toast.js
|       `-- toast.vue
|-- favicon.ico
|-- index.html
|-- main.js
|-- mixins
|   |-- move.js
|   `-- shortcuts.js
|-- router
|   |-- index.js
|   `-- modules
|       `-- pageDesign.js
|-- store
|   |-- index.js
|   |-- modules
|   |   `-- pageDesign.js
|   `-- mutation-types.js
|-- stylus
|   |-- base.styl
|   |-- color.styl
|   |-- element-ui.styl
|   |-- grid.styl
|   |-- main.styl
|   |-- mixin.styl
|   |-- page-design-element-ui.styl
|   `-- page-design.styl
|-- util
|   |-- clickoutside.js
|   |-- filters.js
|   `-- validator.js
`-- views
    `-- pageDesign
        `-- index.vue

```

# 单文件讲解

其中，单文件有：

- App.vue
- ElementUI.js
- favicon.ico
- index.html
- main.js



## 入口文件 main.js

这是整个项目的入口 js，它的初始化代码是：

```js
import Vue from 'vue'
import App from './App.vue'
import router from './router'
import store from './store'

Vue.config.productionTip = false

new Vue({
  router,
  store,
  render: h => h(App)
}).$mount('#app')
```

我们来一行一行的看：

```js
import Vue from 'vue'
```

第一行，很简单的 js 语法，引入 vue 模块，并设置为变量 Vue。就好像你要引入 jQuery 一样，vue 就是 `jquery-min.js`， Vue 就是 `$`。

```js
import App from './App.vue'
```

第二行，是引入的 `App.vue` 文件，在 Vue 中引入文件可以直接用 import，文件后缀名可以是 `.vue`，这是 Vue 自己的文件类型，就好像 `webpack` 会将 `js` 和 `css` 文件打包，在配置好 vue 插件后（项目默认配置），webpack 就可以将 `.vue` 类型的文件整合打包。

我们可以来接着看一下 `App.vue`，这是一个视图（或者说组件和页面），想象以下我们的 `index.html` 中什么也没有，只有一个视图，这个视图相当于一个容器，然后我们往这个容器中放各种各样的积木（其它组件或者其它页面）。

```js
import router from './router'
```

第三行，这段代码引入一段路由配置。

```js
import store from './store'
```

第四行，注入 store。

```js
Vue.config.productionTip = false
```

设置为 false 以阻止 vue 在启动的时候生成**生产提示**。

```js
new Vue({
  router,
  store,
  render: h => h(App)
}).$mount('#app')
```

使用 `new Vue` 实例化，其实就是写 `js` 时候常用的 `init`，原来是使用 `el: '#app'`，意思是将所有视图放在 id 值为 `app` 这个 DOM 元素中，现在改成了 `.$mount('#app')`，其实道理是一样的。总的来说就是将 `App.vue` 放到 `#app` 中。



## 单页面组件 App.vue

现在我们来看 `App.vue` 文件，在 Vue 中，官网叫它组件，单页面的意思是结构、样式、逻辑代码都写在同一个文件当中，引入一个组件，同时也就是引入它的结构、样式和逻辑：

```vue
<template>
  <div id="app">
    <div id="nav">
      <router-link to="/">Home</router-link> |
      <router-link to="/about">About</router-link>
    </div>
    <router-view/>
  </div>
</template>
<style lang="stylus">
#app
  font-family 'Avenir', Helvetica, Arial, sans-serif
  -webkit-font-smoothing antialiased
  -moz-osx-font-smoothing grayscale
  text-align center
  color #2c3e50

#nav
  padding 30px
  a
    font-weight bold
    color #2c3e50
    &.router-link-exact-active
      color #42b983
</style>

```

node 端之所以能识别 `.vue` 文件，是因为前面说的 `webpack` 在编译时将 `.vue` 文件中的 `html、js、css` 都抽出来合成新的单独的文件。

看这个文件内分为三大部分，分别是 `<template><script><style>`，很好理解结构、脚本、样式；`script` 就像 `node` 一样暴露一些接口，可以看到我们的 `template` 中存在两种 `router` 标签：

```html
<template>
  <div id="app">
    <div id="nav">
      <router-link to="/">Home</router-link> |
      <router-link to="/about">About</router-link>
    </div>
    <router-view/>
  </div>
</template>
```

这时候就开始涉及路由了。



## 路由

说一下路由的大致概念：传统的 PHP 路由是由服务器端根据一定的 url 规则匹配来返回给前端不同的页面代码。如以下地址：[isux.tencent.com/about](https://link.juejin.im/?target=https%3A%2F%2Fisux.tencent.com%2Fabout) 和 [isux.tencent.com/recruit](https://link.juejin.im/?target=https%3A%2F%2Fisux.tencent.com%2Frecruit)

这里注意只有 about 和 recruit，这些不带 `xxx.html` 的地址其实是服务器端经过一层封装指定到某些文件上去。同样的道理，前端也可以实现带锚点的方式实现简单的路由（不需要刷新页面）：https://zhitu.isux.us/index.php/preview/install#win64

其中 `#xxx` 就是我们的锚点路由













我们能看到最后几行的组件展示：

```js
new Vue({
  router,
  store,
  render: h => h(App)
}).$mount('#app')
```

```js
render: h => h(App)
```

这个是 es6 的语法，表示 Vue 实例选项对象的 `render` 方法作为一个函数，接受传入的参数 `h` 函数，返回 `h(App)` 的函数调用结果。其次，Vue 在创建 Vue 实例时，通过调用 render 方法来渲染实例的 DOM 树。最后，Vue 在调用 render 方法时，会传入一个 `createElement` 函数作为参数，也就是这里的 `h` 的实参是 `createElement` 函数，然后 `createElement` 会以 APP 为参数进行调用，关于 `createElement` 函数的参数说明参见：[Element-Arguments](http://vuejs.org/v2/guide/render-function.html#createElement-Arguments)。