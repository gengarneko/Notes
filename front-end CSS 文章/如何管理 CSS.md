# CSS 代码管理

**命名**是我认为 CSS 中最难的问题没有之一。

CSS 是一个不强调**逻辑**，而更侧重表现的一门**所见即所得**的语言。你写了一个属性它就有一个样式，就好比嗑瓜子，每次嗑下都会有及时的奖励，这种愉悦感（？）是其它开发语言所不具备的。

CSS 也不想其它侧重逻辑的语言，有比较多的代码管理方式。你能管理 CSS 的工具只有两个：

- **文件引用**
- **命名**

通常为了减少页面 HTTP 的请求，我们尽可能的将 CSS 文件合并。于是靠**文件引用**这个方式来管理 CSS 的这条路是不怎么行的。

我们知道 CSS 的作用域是全局的，只要你引用而一个 CSS 文件，它就会影响你整个页面。于是，**CSS 代码管理**的重任也就压在了**命名**上面。

所以说，你能很好掌握 CSS 命名，那么，你就能管理好 CSS。

## 管理 CSS 就好比管理衬衫

对于 CSS 的管理，我这边举个不恰当但是很贴切的类比，就是类似于日常生活中**内裤**的管理，是的就是日常穿的内裤，和 CSS 中的“类库”谐音（我太有才了）。

前面有讲到，对于 CSS 的管理我们基本只能通过命名的方式去管理。这听起来似乎是一件值得开心的事情，因为只有一条路，大家都没得选。然而即使只有一条路，也有相对应的技巧与门道。

举个例子，比如我们有 7 条不一样的内裤，如果只能用命名的方式去管理，会有多少种可能？

| 季节    | 颜色       | 材质      | 花纹      |
| ------- | ---------- | --------- | --------- |
| .春 { } | .red { }   | .纯棉 { } | .格子 { } |
| .夏 { } | .green { } | .涤纶 { } | .波点 { } |
| .秋 { } | .blue { }  | .氨纶 { } | .动漫 { } |

一千个读者有一千个哈姆雷特一样，不同的人对于同一件事物的命名方式是不一样的。因为对于自己喜欢和熟悉的东西，对于其他人来说并不是如此，所以，CSS 有着无限的可能性！！！（？？？问号脸）

当然如果也就这么几件衬衫，你我归类方式不同我也能理解看懂，要我找我也能找到，但是当我们将衬衫上升到**库**的概念的时候，就没有那么容易了。

如果你是个衬衫爱好者，有着 100+ 的衬衫持有量，你怎么命名管理？

## 管理 CSS 衬衫的通用方法

之前有讲到，管理 CSS 的问题就是 CSS 命名的问题。所以我们看看目前现有的最流行的解决 CSS 命名的通用解决方案 BEM。（Block Element Modifier）

因为我不是 BEM 的拥护者，之前举的例子被网友评论打脸了，这边就直接讲结果吧。

```css
.block__element--modifier{ /* */ }
```

很直观的可以看到引用了 BEM 之后，我们的 CSS 就有了，三级的作用域。这个怎么解释呢？

很简单，之前我们命名 7 件衬衫的方式是一维的。但是用 BEM 之后，可以看作是一个长宽高各 10 的立体，你要找一个东西，你需要知道对应的长宽高对应的坐标就能找到：

```css
.长1__宽2--高3{ /* */}
```

是不是一下子就简单了很多，BEM 的系统解决了 CSS 命名的问题，并且它的维护性和拓展性也是非常之棒的。所以它是很值得推荐的管理 CSS 代码的解决方案。感兴趣的自行了解。

这里呢，我是想说是我不喜欢 BEM 的点（感觉又要打脸了）。与其说不喜欢 BEM，倒不如说我连 CSS 命名本身都不喜欢。为什么这么说呢？因为对我来说**命名**真是一件非常痛苦的事情。

在写代码的过程中，有两个非常相像的块，它们有些许的不同，这时候你为了公用它们相同的样式，你又必须将这部分抽象出来，可是抽象出来的这个部分，又不能倾向于这两者中的一个，你要怎么命名呢？就好比你：

```css
/* 这个例子不是 BEM 的正确使用姿势，这里只是作为参考 */

.柜1__屉2--内裤，.柜2__屉2--内裤{
    名称：贴身的下身内衣；
    大小：中号；
    颜色：粉色；
}
.柜1__屉2--内裤{ 
    适合性别：男； 
}
.柜2__屉2--内裤{ 
    适合性别：女； 
    款式：蕾丝；
}

<div style="柜1__屉2--内裤">一条内裤</div>
<div style="柜2__屉2--内裤">另一条内裤</div>
```

你想为了上面这两条内裤公共的部分抽象一个通用的类，请问要怎么命名？然后更加可怕的是，此时又来了第三条内裤：

```css
.柜2__屉3--内裤{ 
    名称：贴身的下身内衣；
    大小：中号；
    颜色：红色；
    适合性别：女； 
    款式：蕾丝；
}
<div style="柜2__屉3--内裤">又一条内裤</div>
```

然后你又发现，之前好不容易命名好的通用类，无法适用于这第三条内裤上面。然而第二条内裤和第三条内裤又有了公用的部分，这部分是不是又可以进一步抽像呢？一旦抽象，就意味着又要取一个名字，然而此时你又该怎么取名呢？这次拓展两步，我的已经崩溃了。

当然在实际开发中，我相信大家有更优秀的命名方式，来解决这个实际的问题。这里只是用这种夸张的方式来证明命名是一件非常不容易的事情（不用较真我的使用姿势是否正确）。

## 你要的是内裤，而不是在意它放在那里

我们每次找不到自己内裤的时候，会本能问：“妈！我昨天穿的那条内裤在哪儿啊？”

妈妈通常会不耐烦的回答：“昨天不就告诉你了在第一个柜子的第二个抽屉，这样的问题你到底还要问几遍？”

```
.柜1__屉2--内裤{ 
    名称：贴身的下身内衣；
    大小：中号；
    适合性别：男； 
    颜色：黑色；
}
复制代码
```

“第一个柜子第二抽屉”，这听起来很像 BEM 命名的 的方式，当然它能非常简单直白的告诉你内裤放在哪里。

可是不知道大家有没有想过这样的问题，如果我们问：“妈！我昨天穿的那条内裤在哪儿啊？” 啪！你妈妈直接就把内裤扔你脸上了，这种方式是不是才是我们更希望看到的结果。是的，要啥**内裤**坐标啊，直接把**内裤**给我不就好了。我要的是内裤，不是内裤放在哪里。

CSS 是什么？是**层叠样式表**，而 `class` （类名）显然不是，它只是 CSS 和 HTML 之间的**钩子**。

```css
名称：贴身的下身内衣；
大小：中号；
适合性别：男； 
颜色：黑色；
```

这些东西，才是真正意义上的我们想要的“内裤”的样式。而`.柜1__屉2--内裤`只是一个告诉你 “内裤” 放在哪儿的坐标。

那在实际开发过程中，怎么样才算是想要内裤的时候，内裤就出现在我们手中呢？

```html
<div style="名称：贴身的下身内衣；大小：中号；颜色：粉色；适合性别：男；">一条内裤</div>

<div style="名称：贴身的下身内衣；大小：中号；颜色：粉色；适合性别：女；款式：蕾丝；">另一条内裤</div>
    
<div style="名称：贴身的下身内衣；大小：中号；颜色：红色；适合性别：女；款式：蕾丝；">又一条内裤</div>
```

是的，通过 `style` 直接写 CSS 属性，就能简单粗暴的把“内裤放到别人手中”。而这也是我认为最符合 CSS “所见即所得” 的方式。

想要什么样式我就写什么样式，不用花时间去为我的样式创建一个自认为很好看，但是别人看不懂的类名。我也不用考虑命名污染的问题，因为根本连命名都没有。也正因为连命名都没有，所以也不需要纠结上面提到的任何关于命名让人头疼的问题。

只是因为我们大家都太习惯创建 `class` 了，导致我们在写样式的时候，第一步想不是样式本身而是创建一个 `class`。在我看来这是有一点**本末倒置**的。

总结一下就是：当我想要“内裤”的时候，我希望的是“内裤”就直接出现在我的手里，而不是得到一个能精确告诉我“内裤”放在哪里的坐标。不管这个坐标的命名规则听起来是有多么的好。

一旦有了命名，我在管理 100 条“内裤”的同时，还得管理比“内裤”本身量级更复杂的这 100 个类名。

## 管理材料而不是衣物

我们之所以会需要去**管理代码**，很大一部分原因是因为我们想要去**复用**它造成的。简单的来说，现买现用，穿完就扔的内裤，是不需要你花时间和精力去管理的。

上一节中我们放弃了复用样式这个想法，利用 **inline  css**，在解决**代码管理**问题的同时，还得到了一种将重心聚焦在 CSS 样式本身的编程体验。

正是因为我们放弃了命名，所以才解决了**代码管理**问题，可是想要**复用**就必定意味着要命名。这听起来似乎是一个悖论。

那有没有一种方式是可以跳出这个怪圈的呢？答案当然是有的，那就是放弃管理“内裤”，而是转向去管理“内裤”的**原材料**。我们将之前需要管理的 100 条内裤的原材料列举如下：

- 布类型：棉，麻，涤纶，氨纶，莫代尔...
- 颜色：赤，橙，黄，绿，青，蓝，紫...
- ...

基于之前的例子，我们现在的代码会变成什么样的呢？

```
<style>
  .贴身的下身内衣{ }
  .中号{ }
  .男{ }
  .女{ }
  .黑色{ }
  .红色{ }
  .粉色{ }
  .蕾丝{ }
</style>

<div class="贴身的下身内衣 中号 粉 男">一条内裤</div>
<div class="贴身的下身内衣 中号 粉色 女 蕾丝">另一条内裤</div>
<div class="贴身的下身内衣 中号 红色 女 蕾丝">又一条内裤</div>
<div class="红色">一匹红色的马</div>
复制代码
```

首先，因为这些原材料都已经是不能拆分的最小单元，所以他们的名字能非常容易的固化下来，形成一个通用的“类库”。每次创建新项目的时候，你只需要略微的修改就可以复用起来。

虽然为了解决样式**复用**的问题我们还是有创建类名，但因为这些命名是不可以拆分并且容易固化的，所以管理的难度会小很多。并且随着，时间的推移，原材料的膨胀率是非常小的。组件化如果做得好，原材料甚至可以做到只减不增。

更惊奇的是，这些原材料可不只用于内裤上，它还可以应用到衣服，裤子，鞋子...等等一系列的东西上。你甚至可以用这个原材料，把一匹马涂成红色。这就是我们视角改变了之后，整个**思维方式**的巨大改变。而是将**复用**发挥到极致。

这种将样式原子化的思维方式，是来自雅虎团队的 [**Atomic CSS**](https://link.juejin.im?target=https%3A%2F%2Facss.io%2F)  （简称 ACSS ）。毫不吹嘘的说，基于这套理论，我是我遇到的前端程序员中 CSS 原型稿写的最快的程序员（可能我认识的人本来就不多）。

在这里有必要解释一下，我全篇所有的论证都是基于“库”的概念的。如果你只是创建一个简单的运营活动页 ACSS 那你只能用到 ACSS **快**这一个特性，而它更大的优势**代码管理**这一块是体现不出来的。

因为组件化思维正是当下最流行的时候。而 ACSS 是和组件化思维特别 Match 的一种方式。所以特别希望 ACSS 能被大家看到。当然个人能力有限，如果不恰当的地方可以给我留言，我们一起探讨。

## 衣物是工业品而不是艺术品

对大多数人来说，衬衫无非那么几种，各种颜色的，图案的，棉的，速干的，不会去特意买什么当季流行款式。

衣服只是工业品而不是艺术品，工业品注定会控制材料的种类以降低成本，真正有钱任性的人，不会去考虑复用性的问题，款式换了再买一套就是了，而不是在原来的基础上修修改改。

网页开发上也是一样的，如果你不是走视觉类的网页（每过一阵子就要形象大改，复用性低），那么你网页的主要色彩也就那么几种。

如果你的设计师，是对自己的设计语言是有极致约束能力的，那对于我们开发者来说这真的是一件非常开心的事情。





## 相关阅读

1. [quickLayout.css-快速构建结构兼容的web页面](https://link.juejin.im?target=https%3A%2F%2Fwww.zhangxinxu.com%2Fwordpress%2F2014%2F03%2Fquicklayout-css-%25E5%25BF%25AB%25E9%2580%259F%25E6%259E%2584%25E5%25BB%25BA%25E7%25BB%2593%25E6%259E%2584%25E5%2585%25BC%25E5%25AE%25B9%25E7%259A%2584web%25E9%25A1%25B5%25E9%259D%25A2%2F) @张鑫旭 
    男神作品，强推；
2. [「英」在组件化浪潮中重新思考CSS ](https://link.juejin.im?target=http%3A%2F%2Fjohnpolacek.com%2Frethinking%2F) @johnpolacek 
    虽然是英文，但是网页做得像PPT一样，通俗易懂，强推；
3. [「CSS思维」组件化VS原子化](https://juejin.im/post/5b4063936fb9a04fb016b738) @ziven27 
    我的一篇专门解释“组件化思维” 和 “原子化思维” 区别的文章；
4. [ ACSS 官网 ](https://link.juejin.im?target=https%3A%2F%2Facss.io%2F) @雅虎 
     这个思维最早应该是雅虎推出来的，最近他们有在推 React ACSS
5. [关于HTML语义和前端架构](https://link.juejin.im?target=http%3A%2F%2Fwww.w3cplus.com%2Fcss%2Fabout-html-semantics-front-end-architecture.html) @大漠；
6. [「译」CSS通用类和“关注点分离”](https://link.juejin.im?target=https%3A%2F%2Fwww.zcfy.cc%2Farticle%2Fcss-utility-classes-and-quote-separation-of-concerns-quote-4149.html%3Ft%3Dnew) @adamwathan；
7. [「英」Styling React](https://link.juejin.im?target=https%3A%2F%2Fsurvivejs.com%2Freact%2Fadvanced-techniques%2Fstyling-react%2F) @SURVIVEJS；
8. [「英」CSS最佳实践探讨 - Atomic CSS](https://link.juejin.im?target=https%3A%2F%2Fwww.smashingmagazine.com%2F2013%2F10%2Fchallenging-css-best-practices-atomic-approach%2F) @smashingmagazine；

作者：ziven27

链接：https://juejin.im/post/5ba862d9f265da0ae472868a

来源：掘金

著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。