<html>
<head>
  <title>1.02 -- å‰ç«¯ç»„ä»¶åŒ–</title>
  <basefont face="Consolas" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600363 (zh-CN, DDL); Windows/6.1.1 (Win64);"/>
  <style>
    body, td {
      font-family: Consolas;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1374"/>
<h1>1.02 -- å‰ç«¯ç»„ä»¶åŒ–</h1>

<div>
<span><div><div>å¾ˆå¤šè¯¾ç¨‹ä¸€ä¸Šæ¥å°±ç»™å¤§å®¶å¦‚ä½•é…ç½®ç¯å¢ƒã€æ€ä¹ˆå†™ React.js ç»„ä»¶ã€‚ä½†æ˜¯æœ¬è¯¾ç¨‹è¿˜æ˜¯å¸Œæœ›å¤§å®¶å¯¹é—®é¢˜çš„æ ¹æºæœ‰ä¸€ä¸ªæ›´åŠ æ·±å…¥çš„äº†è§£ï¼Œå…¶å®å¾ˆå¤šçš„åº“ã€æ¡†æ¶éƒ½æ˜¯è§£å†³ç±»ä¼¼çš„é—®é¢˜ã€‚åªæœ‰æˆ‘ä»¬å¯¹è¿™äº›åº“ã€æ¡†æ¶è§£å†³çš„é—®é¢˜æœ‰æ·±å…¥çš„äº†è§£å’Œæ€è€ƒä»¥åï¼Œæˆ‘ä»¬æ‰èƒ½å¾—å¿ƒåº”æ‰‹åœ°ä½¿ç”¨å®ƒä»¬ï¼Œå¹¶ä¸”æœ‰æ–°çš„æ¡†æ¶å‡ºæ¥ä¹Ÿä¸ä¼šå¤ªè¿‡è¿·èŒ«â€”â€”â€”â€”å› ä¸ºå…¶å®å®ƒä»¬è§£å†³éƒ½æ˜¯åŒä¸€ä¸ªé—®é¢˜ã€‚</div><div><br/></div><div>è¿™ä¸¤èŠ‚è¯¾æˆ‘ä»¬æ¥æ¢è®¨ä¸€ä¸‹æ˜¯ä»€ä¹ˆæ ·çš„é—®é¢˜å¯¼è‡´äº†æˆ‘ä»¬éœ€è¦å‰ç«¯é¡µé¢è¿›è¡Œç»„ä»¶åŒ–ï¼Œå‰ç«¯é¡µé¢çš„ç»„ä»¶åŒ–éœ€è¦è§£å†³ä»€ä¹ˆæ ·çš„é—®é¢˜ã€‚åç»­è¯¾ç¨‹æˆ‘ä»¬å†æ¥çœ‹çœ‹ React.js æ˜¯æ€ä¹ˆè§£å†³è¿™äº›é—®é¢˜çš„ã€‚</div><div><br/></div><div>æ‰€ä»¥è¿™å‡ èŠ‚æ‰€è®²çš„å†…å®¹å°†å’Œ React.js çš„å†…å®¹æ²¡æœ‰å¤ªå¤§çš„å…³ç³»ï¼Œä½†æ˜¯å¦‚æœä½ èƒ½é¡ºåˆ©äº†è§£è¿™å‡ èŠ‚çš„å†…å®¹ï¼Œé‚£ä¹ˆåé¢é‚£äº›å¯¹æ–°æ‰‹æ¥è¯´å¾ˆå¤æ‚çš„æ¦‚å¿µå¯¹ä½ æ¥è¯´å°±æ˜¯éå¸¸è‡ªç„¶çš„äº‹ã€‚</div><div><br/></div><div>ä¸€ä¸ªç®€å•çš„ç‚¹èµåŠŸèƒ½</div><div><br/></div><div>æˆ‘ä»¬ä¼šä»ä¸€ä¸ªç®€å•çš„ç‚¹èµåŠŸèƒ½è®²èµ·ã€‚ å‡è®¾ç°åœ¨æˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ªç‚¹èµã€å–æ¶ˆç‚¹èµçš„åŠŸèƒ½ã€‚</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â &lt;body&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â &lt;div class='wrapper'&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â &lt;button class='like-btn'&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â &lt;span class='like-text'&gt;ç‚¹èµ&lt;/span&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â &lt;span&gt;ğŸ‘&lt;/span&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â &lt;/button&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â &lt;/div&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â &lt;/body&gt;</span></div></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â const button = document.querySelector('.like-btn')</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â const buttonText = button.querySelector('.like-text')</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â let isLiked = false</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â button.addEventListener('click', () =&gt; {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â isLiked = !isLiked</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â if (isLiked) {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â buttonText.innerHTML = 'å–æ¶ˆ'</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â } else {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â buttonText.innerHTML = 'ç‚¹èµ'</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â }</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â }, false)</span></div></div><div><br/></div><div>åŠŸèƒ½å’Œå®ç°éƒ½å¾ˆç®€å•ï¼ŒæŒ‰é’®å·²ç»å¯ä»¥æä¾›ç‚¹èµå’Œå–æ¶ˆç‚¹èµçš„åŠŸèƒ½ã€‚è¿™æ—¶å€™ä½ çš„åŒäº‹è·‘è¿‡æ¥äº†ï¼Œè¯´ä»–å¾ˆå–œæ¬¢ä½ çš„æŒ‰é’®ï¼Œä»–ä¹Ÿæƒ³ç”¨ä½ å†™çš„è¿™ä¸ªç‚¹èµåŠŸèƒ½ã€‚è¿™æ—¶å€™é—®é¢˜å°±æ¥äº†ï¼Œä½ å°±ä¼šå‘ç°è¿™ç§å®ç°æ–¹å¼å¾ˆè‡´å‘½ï¼šä½ çš„åŒäº‹è¦æŠŠæ•´ä¸ª button å’Œé‡Œé¢çš„ç»“æ„å¤åˆ¶è¿‡å»ï¼Œè¿˜æœ‰æ•´æ®µ JavaScript ä»£ç ä¹Ÿè¦å¤åˆ¶è¿‡å»ã€‚è¿™æ ·çš„å®ç°æ–¹å¼æ²¡æœ‰ä»»ä½•å¯å¤ç”¨æ€§ã€‚</div><div><br/></div><div>ç»“æ„å¤ç”¨</div><div><br/></div><div>ç°åœ¨æˆ‘ä»¬æ¥é‡æ–°æ¥ç¼–å†™è¿™ä¸ªç‚¹èµåŠŸèƒ½, è®©å®ƒå…·æœ‰ä¸€å®šçš„å¯å¤ç”¨æ€§. è¿™æ¬¡æˆ‘ä»¬å…ˆå†™ä¸€ä¸ªç±», è¿™ä¸ªç±»æœ‰ render æ–¹æ³•, è¿™ä¸ªæ–¹æ³•é‡Œé¢ç›´æ¥è¿”å›ä¸€ä¸ªè¡¨ç¤º HTML ç»“æœçš„å­—ç¬¦ä¸²:</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â class LikeButton {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â render () {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â return `</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â &lt;button id='like-btn'&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â Â Â &lt;span class='like-text'&gt;èµ&lt;/span&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â Â Â &lt;span&gt;ğŸ‘&lt;/span&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â &lt;/button&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â `</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â }</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â }</span></div></div><div><br/></div><div>ç„¶åå¯ä»¥ç”¨è¿™ä¸ªç±»æ¥æ„å»ºä¸åŒçš„ç‚¹èµåŠŸèƒ½çš„å®ä¾‹, ç„¶åæŠŠå®ƒä»¬æ’åˆ°é¡µé¢ä¸­.</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â const wrapper = document.querySelector('.wrapper')</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â const likeButton1 = new LikeButton()</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â wrapper.innerHTML = likeButton1.render()</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â const likeButton2 = new LikeButton()</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â wrapper.innerHTML += likeButton2.render()</span></div></div><div><br/></div><div>è¿™é‡Œéå¸¸æš´åŠ›åœ°ä½¿ç”¨äº† innerHTML ï¼ŒæŠŠä¸¤ä¸ªæŒ‰é’®ç²—é²åœ°æ’å…¥äº† wrapper å½“ä¸­ã€‚è™½ç„¶ä½ å¯èƒ½ä¼šå¯¹è¿™ç§å®ç°æ–¹å¼éå¸¸ä¸æ»¡æ„ï¼Œä½†æˆ‘ä»¬è¿˜æ˜¯å‹‰å¼ºäº†å®ç°äº†ç»“æ„çš„å¤ç”¨ã€‚æˆ‘ä»¬åé¢å†æ¥ä¼˜åŒ–å®ƒã€‚</div><div><br/></div><div>å®ç°ç®€å•çš„ç»„ä»¶åŒ–</div><div><br/></div><div>ä½ ä¸€å®šä¼šå‘ç°ï¼Œç°åœ¨çš„æŒ‰é’®æ˜¯æ­»çš„ï¼Œä½ ç‚¹å‡»å®ƒå®ƒæ ¹æœ¬ä¸ä¼šæœ‰ä»€ä¹ˆååº”ã€‚å› ä¸ºæ ¹æœ¬æ²¡æœ‰å¾€ä¸Šé¢æ·»åŠ äº‹ä»¶ã€‚ä½†æ˜¯é—®é¢˜æ¥äº†ï¼ŒLikeButton ç±»é‡Œé¢æ˜¯è™½ç„¶è¯´æœ‰ä¸€ä¸ª buttonï¼Œä½†æ˜¯è¿™ç©æ„æ ¹æœ¬å°±æ˜¯åœ¨å­—ç¬¦ä¸²é‡Œé¢çš„ã€‚ä½ æ€ä¹ˆèƒ½å¾€ä¸€ä¸ªå­—ç¬¦ä¸²é‡Œé¢æ·»åŠ äº‹ä»¶å‘¢ï¼ŸDOM äº‹ä»¶çš„ API åªæœ‰ DOM ç»“æ„æ‰èƒ½ç”¨ã€‚</div><div>æˆ‘ä»¬éœ€è¦ DOM ç»“æ„ï¼Œå‡†ç¡®åœ°æ¥è¯´ï¼šæˆ‘ä»¬éœ€è¦è¿™ä¸ªç‚¹èµåŠŸèƒ½çš„ HTML å­—ç¬¦ä¸²è¡¨ç¤ºçš„ DOM ç»“æ„ã€‚å‡è®¾æˆ‘ä»¬ç°åœ¨æœ‰ä¸€ä¸ªå‡½æ•° createDOMFromString ï¼Œä½ å¾€è¿™ä¸ªå‡½æ•°ä¼ å…¥ HTML å­—ç¬¦ä¸²ï¼Œä½†æ˜¯å®ƒä¼šæŠŠç›¸åº”çš„ DOM å…ƒç´ è¿”å›ç»™ä½ ã€‚è¿™ä¸ªé—®é¢˜å°±å¯ä»¥è§£å†³äº†ã€‚</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">// ::String =&gt; ::Document</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">const createDOMFromString = (domString) =&gt; {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â const div = document.createElement('div')</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â div.innerHTML = domString</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â return div</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">}</span></div></div><div><br/></div><div>å…ˆä¸ç”¨ç®¡è¿™ä¸ªå‡½æ•°åº”è¯¥æ€ä¹ˆå®ç°, å…ˆçŸ¥é“å®ƒæ˜¯å¹²å˜›çš„. æ‹¿æ¥ç”¨å°±å¥½, è¿™æ—¶å€™ç”¨å®ƒæ¥æ”¹å†™ä¸€ä¸‹ LikeButton ç±»:</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â class LikeButton {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â render () {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â this.el = createDOMFromString(`</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â &lt;button class='like-button'&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â Â Â &lt;span class='like-text'&gt;ç‚¹èµ&lt;/span&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â Â Â &lt;span&gt;ğŸ‘&lt;/span&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â &lt;/button&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â `)</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â this.el.addEventListener('click', () =&gt; console.log('click'), false)</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â return this.el</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â }</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â }</span></div></div><div><br/></div><div>ç°åœ¨ render() è¿”å›çš„ä¸æ˜¯ä¸€ä¸ª html å­—ç¬¦ä¸²äº†ï¼Œè€Œæ˜¯ä¸€ä¸ªç”±è¿™ä¸ª html å­—ç¬¦ä¸²æ‰€ç”Ÿæˆçš„ DOMã€‚åœ¨è¿”å› DOM å…ƒç´ ä¹‹å‰ä¼šå…ˆç»™è¿™ä¸ª DOM å…ƒç´ ä¸Šæ·»åŠ äº‹ä»¶å†è¿”å›ã€‚</div><div>å› ä¸ºç°åœ¨ render è¿”å›çš„æ˜¯ DOM å…ƒç´ ï¼Œæ‰€ä»¥ä¸èƒ½ç”¨ innerHTML æš´åŠ›åœ°æ’å…¥ wrapperã€‚è€Œæ˜¯è¦ç”¨ DOM API æ’è¿›å»ã€‚</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â const wrapper = document.querySelector('.wrapper')</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â const likeButton1 = new LikeButton()</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â wrapper.appendChild(likeButton1.render())</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â const likeButton2 = new LikeButton()</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â wrapper.appendChild(likeButton2.render())</span></div></div><div><br/></div><div>ç°åœ¨ä½ ç‚¹å‡»äº†è¿™ä¸¤ä¸ªæŒ‰é’®, æ¯ä¸ªæŒ‰é’®éƒ½ä¼šåœ¨æ§åˆ¶å°æ‰“å° click, è¯´æ˜äº‹ä»¶ç»‘å®šæˆåŠŸäº†. ä½†æ˜¯æŒ‰é’®ä¸Šçš„æ–‡æœ¬è¿˜æ˜¯æ²¡æœ‰å‘ç”Ÿå˜åŒ–, åªè¦ç¨å¾®æ”¹åŠ¨ä¸€ä¸‹ LikeButton çš„ä»£ç å°±å¯ä»¥å®Œæˆå®Œæ•´çš„åŠŸèƒ½:</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â class LikeButton {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â constructor () {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â this.state = { isLiked: false }</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â }</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â changeLikeText () {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â const likeText = this.el.querySelector('.like-text')</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â this.state.isLiked = !this.state.isLiked</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â likeText.innerHTML = this.state.isLiked ? 'å–æ¶ˆ' : 'ç‚¹èµ'</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â }</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â render () {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â this.el = createDOMFromString(`</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â &lt;button class='like-button'&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â Â Â &lt;span class='like-text'&gt;ç‚¹èµ&lt;/span&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â Â Â &lt;span&gt;ğŸ‘&lt;/span&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â &lt;/button&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â `)</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â this.el.addEventListener('click', this.changeLikeText.bind(this), false)</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â return this.el</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â }</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â }</span></div></div><div><br/></div><div>è¿™é‡Œçš„ä»£ç ç¨å¾®é•¿äº†ä¸€ç‚¹, ä½†æ˜¯è¿˜æ˜¯å¾ˆå¥½ç†è§£.åªä¸è¿‡æ˜¯åœ¨ç»™ LikeButton ç±»æ·»åŠ äº†æ„é€ å‡½æ•°, è¿™ä¸ªæ„é€ å‡½æ•°ä¼šç»™æ¯ä¸ª LikeButton çš„å®ä¾‹æ·»åŠ ä¸€ä¸ªå¯¹è±¡ state, state é‡Œé¢ä¿å­˜äº†æ¯ä¸ªæŒ‰é’®è‡ªå·±æ˜¯å¦ç‚¹èµçš„çŠ¶æ€. è¿˜æ”¹å†™äº†åŸæ¥çš„äº‹ä»¶ç»‘å®šå‡½æ•°: åŸæ¥åªæ‰“å° click, ç°åœ¨ç‚¹å‡»çš„æŒ‰é’®ä¼šè°ƒç”¨ changeLikeText æ–¹æ³•, è¿™ä¸ªæ–¹æ³•ä¼šæ ¹æ® this.state çš„çŠ¶æ€æ”¹å˜ç‚¹èµæŒ‰é’®çš„æ–‡æœ¬.</div><div><br/></div><div>ç°åœ¨è¿™ä¸ªç»„ä»¶çš„å¯å¤ç”¨æ€§å·²ç»å¾ˆä¸é”™äº†, ä½ çš„åŒäº‹åªè¦å®ä¾‹åŒ–ä»¥ä¸‹ç„¶åæ’å…¥åˆ° DOM é‡Œé¢å°±å¥½äº†.</div><div><br/></div><div>çœ‹ä¸€ä¸‹æˆ‘ä»¬çš„ä»£ç , ä»”ç»†ç•™æ„ä¸€ä¸‹ changeLikeText å‡½æ•°, è¿™ä¸ªå‡½æ•°åŒ…å«äº† DOM æ“ä½œ, ç°åœ¨çœ‹èµ·æ¥æ¯”è¾ƒç®€å•, é‚£æ˜¯å› ä¸ºæˆ‘ä»¬åªæœ‰ä¸€ä¸ª isLiked çŠ¶æ€, ç”±äºæ•°æ®çŠ¶æ€æ”¹å˜ä¼šå¯¼è‡´éœ€è¦æˆ‘ä»¬å»æ›´æ–°é¡µé¢çš„å†…å®¹, æ‰€ä»¥å‡æƒ³ä¸€ä¸‹, å¦‚æœä½ çš„ç»„ä»¶ä¾èµ–äº†å¾ˆå¤šçŠ¶æ€, é‚£ä¹ˆä½ çš„ç»„ä»¶åŸºæœ¬å…¨éƒ¨éƒ½æ˜¯ DOM æ“ä½œ.</div><div><br/></div><div>ä¸€ä¸ªç»„ä»¶æ˜¾ç¤ºå½¢æ€ç”±å¤šä¸ªçŠ¶æ€å†³å®šçš„æƒ…å†µéå¸¸å¸¸è§, ä»£ç ä¸­æ··æ‚ç€å¯¹ DOM çš„æ“ä½œå…¶å®æ˜¯ä¸€ç§å¾ˆä¸å¥½çš„å®è·µ, æ‰‹åŠ¨ç®¡ç†æ•°æ®å’Œ DOM ä¹‹é—´çš„å…³ç³»ä¼šå¯¼è‡´ä»£ç çš„å¯ç»´æŠ¤æ€§å˜å·®, å®¹æ˜“å‡ºé”™. æ‰€ä»¥æˆ‘ä»¬çš„ä¾‹å­è¿˜æœ‰ä¼˜åŒ–çš„ç©ºé—´: å¦‚ä½•å°½é‡å‡å°‘è¿™ç§æ‰‹åŠ¨ DOM æ“ä½œ?</div><div><br/></div><div>æ”¹å˜çŠ¶æ€ -&gt; æ„å»ºæ–°çš„ DOM å…ƒç´ æ›´æ–°é¡µé¢</div><div><br/></div><div>è¿™é‡Œè¦æå‡ºä¸€ç§æ–°çš„è§£å†³æ–¹æ¡ˆ: ä¸€æ—¦çŠ¶æ€å‘ç”Ÿæ”¹å˜, å°±é‡æ–°è°ƒç”¨ render æ–¹æ³•, æ„å»ºä¸€ä¸ªæ–°çš„ DOM å…ƒç´ . è¿™æ ·åšçš„å¥½å¤„æ˜¯ä»€ä¹ˆ? å¥½å¤„æ˜¯ä½ å¯ä»¥åœ¨ render æ–¹æ³•é‡Œé¢ä½¿ç”¨æœ€æ–°çš„ this.state æ¥æ„é€ ä¸åŒ HTML ç»“æ„çš„å­—ç¬¦ä¸², å¹¶ä¸”é€šè¿‡è¿™ä¸ªå­—ç¬¦ä¸²æ„é€ ä¸åŒçš„ DOM å…ƒç´ . é¡µé¢å°±æ›´æ–°äº†!</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">class LikeButton {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â constructor () {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â this.state = { isLiked: false }</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â }</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â setState (state) {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â this.state = state</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â this.el = this.render()</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â }</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â changeLikeText () {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â this.setState({</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â isLiked: !this.state.isLiked</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â })</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â }</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â render () {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â this.el = createDOMFromString(`</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â &lt;button class='like-btn'&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â &lt;span class='like-text'&gt;${this.state.isLiked ? 'å–æ¶ˆ' : 'ç‚¹èµ'}&lt;/span&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â &lt;span&gt;ğŸ‘&lt;/span&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â &lt;/button&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â `)</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â this.el.addEventListener('click', this.changeLikeText.bind(this), false)</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â return this.el</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â }</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">}</span></div></div><div><br/></div><div>å…¶å®åªæ”¹åŠ¨äº†å‡ ä¸ªå°åœ°æ–¹:</div><ol><li><div>render å‡½æ•°é‡Œé¢çš„ HTML å­—ç¬¦ä¸²ä¼šæ ¹æ® this.state ä¸åŒè€Œä¸åŒ (è¿™é‡Œç”¨äº† ES6 çš„æœ«ç­å­—ç¬¦ä¸², åšè¿™ç§äº‹å¾ˆæ–¹ä¾¿)</div></li><li><div>æ–°å¢ä¸€ä¸ª setState, è¿™ä¸ªå‡½æ•°æ¥æ”¶ä¸€ä¸ªå¯¹è±¡ä½œä¸ºå‚æ•°; å®ƒä¼šè®¾ç½®å®ä¾‹çš„ state, ç„¶åé‡æ–°è°ƒç”¨ä¸€ä¸‹ render æ–¹æ³•.</div></li><li><div>å½“ç”¨æˆ·ç‚¹å‡»æŒ‰é’®çš„æ—¶å€™, changeLikeText ä¼šæ„å»ºæ–°çš„ state å¯¹è±¡, è¿™ä¸ªæ–°çš„ state, ä¼ å…¥ setState å‡½æ•°å½“ä¸­.</div></li></ol><div><br/></div><div>è¿™æ ·çš„ç»“æœå°±æ˜¯, ç”¨æˆ·æ¯æ¬¡ç‚¹å‡», changeLikeText éƒ½ä¼šæ”¹å˜ç»„ä»¶çŠ¶æ€ç„¶åè°ƒç”¨ setState, setState ä¼šè°ƒç”¨ render, render æ–¹æ³•ä¼šæ ¹æ® state çš„ä¸åŒé‡æ–°æ„å»ºä¸åŒçš„ DOM å…ƒç´ .</div><div><br/></div><div>ä¹Ÿå°±æ˜¯è¯´, ä½ åªè¦è°ƒç”¨ setState, ç»„ä»¶å°±ä¼šé‡æ–°æ¸²æŸ“. æˆ‘ä»¬é¡ºåˆ©æ¶ˆé™¤äº†æ‰‹åŠ¨çš„ DOM æ“ä½œ.</div><div><br/></div><div>é‡æ–°æ’å…¥æ–°çš„ DOM å…ƒç´ </div><div><br/></div><div>ä¸Šé¢çš„æ”¹è¿›ä¸ä¼šæœ‰ä»€ä¹ˆæ•ˆæœ, å› ä¸ºä½ ä»”ç»†çœ‹ä¸€ä¸‹ä¼šå‘ç°, å…¶å®é‡æ–°æ¸²æŸ“çš„ DOM å…ƒç´ å¹¶æ²¡æœ‰æ’å…¥åˆ°é¡µé¢å½“ä¸­. æ‰€ä»¥åœ¨è¿™ä¸ªç»„ä»¶å¤–é¢, ä½ éœ€è¦çŸ¥é“è¿™ä¸ªç»„ä»¶å‘ç”Ÿäº†æ”¹å˜, å¹¶æŠŠæ–°çš„ DOM å…ƒç´ æ›´æ–°åˆ°é¡µé¢å½“ä¸­.</div><div><br/></div><div>é‡æ–°ä¿®æ”¹ä¸€ä¸‹ setState æ–¹æ³•</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">...</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â setState (state) {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â const oldEl = this.el</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â this.state = state</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â this.el = this.render()</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â if (this.onStateChange) this.onStateChange(oldEl, this.el)</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â }</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">...</span></div></div><div><br/></div><div>ä½¿ç”¨è¿™ä¸ªç»„ä»¶çš„æ—¶å€™:</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">const likeButton = new LikeButton()</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">wrapper.appendChild(likeButton.render()) // ç¬¬ä¸€æ¬¡æ’å…¥ DOM å…ƒç´ </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">likeButton.onStateChange = (oldEl, newEl) =&gt; {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â wrapper.insertBefore(newEl, oldEl) // æ’å…¥æ–°çš„å…ƒç´ </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â wrapper.removeChild(oldEl) // åˆ é™¤æ—§çš„å…ƒç´ </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">}</span></div></div><div><br/></div><div>è¿™é‡Œæ¯æ¬¡ setState éƒ½ä¼šè°ƒç”¨ onStateChange æ–¹æ³•, è€Œè¿™ä¸ªæ–¹æ³•æ˜¯å®ä¾‹åŒ–ä»¥åæ—¶å€™è¢«è®¾ç½®çš„, æ‰€ä»¥ä½ å¯ä»¥è‡ªå®šä¹‰ onStateChange çš„è¡Œä¸º.</div><div>è¿™é‡Œåšçš„äº‹æ˜¯, æ¯å½“ setState ä¸­æ„é€ å®Œæ–°çš„ DOM å…ƒç´ å, å°±ä¼šé€šè¿‡ setStateChange å‘ŠçŸ¥å¤–éƒ¨æ’å…¥æ–°çš„ DOM å…ƒç´ , ç„¶ååˆ é™¤æ—§çš„å…ƒç´ , é¡µé¢å°±æ›´æ–°äº†. è¿™é‡Œå·²ç»åšäº†è¿›ä¸€æ­¥çš„ä¼˜åŒ–äº†: ç°åœ¨ä¸éœ€è¦å†åŠ¨æ‰‹æ›´æ–°é¡µé¢äº†.</div><div><br/></div><div>éä¸€èˆ¬çš„æš´åŠ›, å› ä¸ºæ¯æ¬¡ setState éƒ½é‡æ–°æ„é€ , æ–°å¢, åˆ é™¤ DOM å…ƒç´ , ä¼šå¯¼è‡´æµè§ˆå™¨è¿›è¡Œå¤§é‡çš„é‡æ’, ä¸¥é‡å½±å“æ€§èƒ½. ä¸è¿‡æ²¡å…³ç³», è¿™ç§æš´åŠ›è¡Œä¸ºå¯ä»¥è¢«ä¸€ç§ Virtual-DOM çš„ç­–ç•¥è§„é¿æ‰, ä½†è¿™ä¸æ˜¯æœ¬æ–‡è®¨è®ºçš„èŒƒå›´.</div><div><br/></div><div>è¿™ä¸ªç‰ˆæœ¬çš„ç‚¹èµåŠŸèƒ½è·Ÿä¸é”™, æˆ‘ä»¬å¯ä»¥ç»§ç»­åœ¨ä¸Šé¢åŠ åŠŸèƒ½, è€Œä¸”è¿˜ä¸éœ€è¦æ‰‹åŠ¨æ“ä½œ DOM. ä½†æ˜¯æœ‰ä¸€ä¸ªä¸å¥½çš„åœ°æ–¹, å¦‚æœæˆ‘éœ€è¦é‡æ–°å¦å¤–åšä¸€ä¸ªæ–°ç»„ä»¶, è­¬å¦‚è¯´è¯„è®ºç»„ä»¶, é‚£ä¹ˆé‡Œé¢çš„è¿™äº›setState æ–¹æ³•è¦é‡æ–°å†™ä¸€é, å…¶å®è¿™äº›ä¸œè¥¿éƒ½æ˜¯å¯ä»¥æŠ½å‡ºæ¥çš„, å˜æˆä¸€ä¸ªé€šç”¨çš„æ¨¡å¼.</div><div><br/></div><div>ä¸ºäº†è®©ä»£ç æ›´åŠ çµæ´», å¯ä»¥å†™æ›´å¤šçš„ç»„ä»¶, æˆ‘ä»¬æŠŠè¿™ç§æ¨¡å¼æŠ½è±¡å‡ºæ¥, æ”¾åˆ°ä¸€ä¸ª Component ç±»å½“ä¸­:</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â class Component {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â setState (state) {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â const oldEl = this.el</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â this.state = state</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â this._renderDOM()</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â if (this.onStateChange) this.onStateChange(oldEl, this.el)</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â }</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â _renderDOM () {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â this.el = createDOMFromString(this.render())</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â if (this.onClick) {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â this.el.addEventListener('click', this.onClick.bind(this), false)</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â }</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â return this.el</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â }</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â }</span></div></div><div><br/></div><div>è¿™ä¸ªæ˜¯ä¸€ä¸ªç»„ä»¶çˆ¶ç±» Component, æ‰€æœ‰ç»„ä»¶éƒ½å¯ä»¥ç»§æ‰¿è¿™ä¸ªçˆ¶ç±»æ¥æ„å»º. å®ƒå®šä¹‰çš„ä¸¤ä¸ªæ–¹æ³•, ä¸€ä¸ªæ˜¯æˆ‘ä»¬å·²ç»å¾ˆç†Ÿæ‚‰çš„ setState; ä¸€ä¸ªæ˜¯ç§æœ‰æ–¹æ³• _renderDOM. _renderDOM æ–¹æ³•è°ƒç”¨ this.render æ¥æ„å»º DOM å…ƒç´ å¹¶ä¸”ç›‘å¬ onClick äº‹ä»¶. æ‰€ä»¥, ç»„ä»¶å­ç±»ç»§æ‰¿çš„æ—¶å€™åªéœ€è¦å®ç°ä¸€ä¸ªè¿”å› HTML å­—ç¬¦ä¸²çš„ render æ–¹æ³•å°±å¯ä»¥äº†.</div><div><br/></div><div>è¿˜æœ‰ä¸€ä¸ªé¢å¤–çš„ mount æ–¹æ³•, å…¶å®å°±æ˜¯æŠŠç»„ä»¶çš„ DOM å…ƒç´ æ’å…¥åˆ°é¡µé¢, å¹¶ä¸”åœ¨ setState çš„æ—¶å€™æ›´æ–°é¡µé¢:</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â const mount = (component, wrapper) =&gt; {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â wrapper.appendChild(component._renderDOM())</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â component.onStateChange = (oldEl, newEl) =&gt; {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â wrapper.insertBefore(newEl, oldEl)</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â wrapper.removeChild(oldEl)</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â }</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â }</span></div></div><div><br/></div><div>è¿™æ ·çš„è¯æˆ‘ä»¬é‡æ–°å†™ç‚¹èµç»„ä»¶å°±ä¼šå˜æˆ:</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">class LikeButton extends Component {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â constructor () {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â super()</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â this.state = { isLiked: false }</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â }</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â onClick () {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â this.setState({</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â isLiked: !this.state.isLiked</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â })</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â }</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â render () {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â return `</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â &lt;button class='like-btn'&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â Â Â &lt;span class='like-text'&gt;${this.state.isLiked ? 'å–æ¶ˆ' : 'ç‚¹èµ'}&lt;/span&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â Â Â &lt;span&gt;ğŸ‘&lt;/span&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â &lt;/button&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â `</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â }</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â }</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â mount(new LikeButton(), wrapper)</span></div></div><div><br/></div><div>è¿™æ ·è¿˜ä¸å¤Ÿå¥½, åœ¨å®é™…å¼€å‘ä¸­, ä½ å¯èƒ½éœ€è¦ç»™ç»„ä»¶ä¼ å…¥ä¸€äº›è‡ªå®šä¹‰çš„é…ç½®æ•°æ®. ä¾‹å¦‚è¯´æƒ³é…ç½®ä¸€ä¸‹ç‚¹èµæŒ‰é’®çš„èƒŒæ™¯é¢œè‰², å¦‚æœæˆ‘ç»™å®ƒä¼ å…¥ä¸€ä¸ªå‚æ•°, å‘Šè¯‰å®ƒæ€ä¹ˆè®¾ç½®è‡ªå·±çš„é¢œè‰². é‚£ä¹ˆè¿™ä¸ªæŒ‰é’®çš„å®šåˆ¶æ€§å°±æ›´å¼ºäº†. æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç»™ç»„ä»¶ç±»å’Œå®ƒçš„å­ç±»éƒ½ä¼ å…¥ä¸€ä¸ªå‚æ•° props, ä½œä¸ºç»„ä»¶çš„æ’è‡³å‚æ•°, ä¿®æ”¹ Component çš„æ„é€ å‡½æ•°ä¸º:</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">...</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â constructor (props = {}) {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â this.props = props</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â }</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">...</span></div></div><div><br/></div><div>ç»§æ‰¿çš„æ—¶å€™é€šè¿‡ super(props) æŠŠ props ä¼ ç»™çˆ¶ç±», è¿™æ ·å°±å¯ä»¥é€šè¿‡ this.props è·å–åˆ°é…ç½®å‚æ•°:</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â class LikeButton extends Component {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â constructor (props) {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â super(props)</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â this.state = { isLiked: false }</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â }</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â onClick () {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â this.setState({</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â isLiked: !this.state.isLiked</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â })</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â }</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â render () {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â return `</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â &lt;button class='like-btn' style=&quot;background-color: ${this.props.bgColor}&quot;&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â Â Â &lt;span class='like-text'&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â Â Â Â Â ${this.state.isLiked ? 'å–æ¶ˆ' : 'ç‚¹èµ'}</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â Â Â &lt;/span&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â Â Â &lt;span&gt;ğŸ‘&lt;/span&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â &lt;/button&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â `</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â }</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â }</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â mount(new LikeButton({ bgColor: 'red' }), wrapper)</span></div></div><div><br/></div><div>è¿™é‡Œæˆ‘ä»¬ç¨å¾®ä¿®æ”¹ä¸€ä¸‹åŸæœ‰çš„ LikeButton çš„ render æ–¹æ³•, è®©å®ƒå¯ä»¥æ ¹æ®ä¼ å…¥å‚æ•° this.props.bgColor æ¥ç”Ÿæˆä¸åŒçš„ style å±æ€§. è¿™æ ·å°±å¯ä»¥è‡ªæœ‰é…ç½®ç»„ä»¶çš„é¢œè‰²äº†.</div><div><br/></div><div>åªè¦æœ‰ä¸Šé¢é‚£ä¸ª Component ç±»å’Œ mount æ–¹æ³•åŠ èµ·æ¥ä¸è¶³ 40 è¡Œä»£ç å°±å¯ä»¥åšåˆ°ç»„ä»¶åŒ–. å¦‚æœæˆ‘ä»¬éœ€è¦å†™å¦å¤–ä¸€ä¸ªç»„ä»¶, åªéœ€è¦åƒä¸Šé¢ä¸€æ ·, ç®€å•çš„ç»§æ‰¿ä¸€ä¸‹ Component ç±»å°±å¥½äº†:</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â class RedBlueButton extends Component {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â constructor (props) {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â super(props)</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â this.state = {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â color: 'red'</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â }</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â }</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â onClick () {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â this.setState({</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â color: 'blue'</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â })</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â }</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â render () {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â return `</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â &lt;div style='color: ${this.state.color};'&gt;${this.state.color}&lt;/div&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â `</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â }</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â }</span></div></div><div><br/></div><div>ç®€å•å¥½ç”¨, Component å®Œæ•´ä»£ç å¦‚ä¸‹</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">&lt;!DOCTYPE html&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">&lt;html&gt;</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â &lt;head&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â &lt;meta charset=&quot;utf-8&quot;&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â &lt;title&gt;Reactjs in 40 &lt;/title&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â &lt;style media=&quot;screen&quot;&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â .like-btn { font-size: 50px; }</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â &lt;/style&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â &lt;/head&gt;</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â &lt;body&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â &lt;div class='wrapper'&gt;&lt;/div&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â &lt;/body&gt;</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â &lt;script type=&quot;text/javascript&quot;&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â /* Component */</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â class Component {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â constructor (props = {}) {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â this.props = props</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â }</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â setState (state) {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â const oldEl = this.el</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â this.state = state</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â this.el = this.renderDOM()</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â if (this.onStateChange) this.onStateChange(oldEl, this.el)</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â }</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â renderDOM () {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â this.el = createDOMFromString(this.render())</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â if (this.onClick) {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â Â Â this.el.addEventListener('click', this.onClick.bind(this), false)</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â }</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â return this.el</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â }</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â }</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â const createDOMFromString = (domString) =&gt; {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â const div = document.createElement('div')</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â div.innerHTML = domString</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â return div</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â }</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â const mount = (component, wrapper) =&gt; {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â wrapper.appendChild(component.renderDOM())</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â component.onStateChange = (oldEl, newEl) =&gt; {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â wrapper.insertBefore(newEl, oldEl)</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â wrapper.removeChild(oldEl)</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â }</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â }</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â /* ========================================= */</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â class LikeButton extends Component {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â constructor (props) {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â super(props)</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â this.state = { isLiked: false }</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â }</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â onClick () {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â this.setState({</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â Â Â isLiked: !this.state.isLiked</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â })</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â }</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â render () {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â return `</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â Â Â &lt;button class='like-btn' style=&quot;background-color: ${this.props.bgColor}&quot;&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â Â Â Â Â &lt;span class='like-text'&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â Â Â Â Â Â Â ${this.state.isLiked ? 'å–æ¶ˆ' : 'ç‚¹èµ'}</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â Â Â Â Â &lt;/span&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;ğŸ‘&lt;/span&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â Â Â &lt;/button&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â `</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â }</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â }</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â class RedBlueButton extends Component {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â constructor (props) {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â super(props)</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â this.state = {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â Â Â color: 'red'</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â }</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â }</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â onClick () {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â this.setState({</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â Â Â color: 'blue'</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â })</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â }</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â render () {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â return `</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â Â Â &lt;div style='color: ${this.state.color};'&gt;${this.state.color}&lt;/div&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â Â Â `</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â Â Â }</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â }</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â const wrapper = document.querySelector('.wrapper')</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â mount(new LikeButton({ bgColor: 'red' }), wrapper)</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â mount(new LikeButton(), wrapper)</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â Â Â mount(new RedBlueButton(), wrapper)</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Â Â &lt;/script&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">&lt;/html&gt;</span></div></div><div><br/></div><div>æˆ‘ä»¬ç”¨å¾ˆé•¿çš„ç¯‡å¹…æ¥è®²è¿™ä¸ªä¾‹å­, å¹¶ä¸”åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ä¸€ç›´åœ¨ä¼˜åŒ–ç¼–å†™çš„æ–¹å¼. æœ€åæŠ½ç¦»å‡ºæ¥äº†ä¸€ä¸ªç±», å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´å¥½çš„åšç»„ä»¶åŒ–. åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­æˆ‘ä»¬å­¦åˆ°äº†ä»€ä¹ˆ?</div><div><br/></div><div>ç»„ä»¶åŒ–å¯ä»¥å¸®åŠ©æˆ‘ä»¬è§£å†³å‰ç«¯çš„å¤ç”¨æ€§é—®é¢˜, æ•´ä¸ªé¡µé¢å¯ä»¥ç”±è¿™æ ·çš„ä¸åŒçš„ç»„ä»¶ç»„åˆ, åµŒå¥—æ„æˆ.</div><div><br/></div><div>ä¸€ä¸ªç»„ä»¶æœ‰è‡ªå·±çš„æ˜¾ç¤ºå½¢æ€ (ä¸Šé¢çš„ HTML ç»“æ„å’Œå†…å®¹) è¡Œä¸º, ç»„ä»¶çš„æ˜¾ç¤ºå½¢æ€å’Œè¡Œä¸ºå¯ä»¥ç”±æ•°æ®çŠ¶æ€ (state) å’Œé…ç½®å‚æ•° (props) å…±åŒå†³å®š. æ•°æ®çŠ¶æ€å’Œé…ç½®å‚æ•°çš„æ”¹å˜éƒ½ä¼šå½±å“åˆ°è¿™ä¸ªç»„ä»¶çš„æ˜¾ç¤ºå½¢æ€.</div><div><br/></div><div>å½“æ•°æ®å˜åŒ–çš„æ—¶å€™, ç»„ä»¶çš„æ˜¾ç¤ºéœ€è¦æ›´æ–°. æ‰€ä»¥å¦‚æœç»„ä»¶åŒ–çš„æ¨¡å¼èƒ½æä¾›ä¸€ç§é«˜æ•ˆçš„æ–¹å¼è‡ªåŠ¨åŒ–åœ°å¸®åŠ©æˆ‘ä»¬æ›´æ–°é¡µé¢, é‚£ä¹Ÿå°±å¯ä»¥å¤§å¤§é™ä½æˆ‘ä»¬ä»£ç çš„å¤æ‚åº¦, å¸¦æ¥æ›´å¥½çš„å¯ç»´æŠ¤æ€§.</div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div></div><div><br/></div></span>
</div></body></html> 