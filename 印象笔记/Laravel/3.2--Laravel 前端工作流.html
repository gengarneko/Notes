<html>
<head>
  <title>3.2--Laravel 前端工作流</title>
  <basefont face="Consolas" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600363 (zh-CN, DDL); Windows/6.1.1 (Win64);"/>
  <style>
    body, td {
      font-family: Consolas;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1821"/>
<h1>3.2--Laravel 前端工作流</h1>

<div>
<span><div>Laravel 前端工作流</div><div><br/></div><div>SASS 语法基础</div><div><br/></div><div>Sass 是一种可以编写 CSS 的语言 借助 sass 我们可以少些很多代码</div><div>下面对 sass 的几个主要功能进行讲解</div><div><br/></div><div>1.样式文件导入</div><div><br/></div><div>Sass 使用 @import 来导入其他的样式文件</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">@import &quot;node_modules/bootstrap-sass/assets/stylesheets/bootstrap&quot;;</span></div></div><div><br/></div><div>上面代码将导入放在此文件夹中所有的样式文件 你也可以通过以下代码单独导入</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">@import &quot;node_modules/bootstrap-sass/assets/stylesheets/bootstrap/_alerts.scss&quot;;</span></div></div><div><br/></div><div>2.变量</div><div><br/></div><div>Sass 还允许在代码中加入变量 所有的变量以 $ 开头</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">$navbar-color: #3c3e42;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">.navbar-inverse {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">  background-color: $navbar-color;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">}</span></div></div><div><br/></div><div>上面代码定义了一个 $navbar-color 颜色变量 编译成功后,变量将会被替换成所对应的值</div><div><br/></div><div>3.嵌套</div><div><br/></div><div>Sass 允许你在选择器中进行互相嵌套,减少代码量</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">body div {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">  color: red;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">}</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">body h1 {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">  margin-top: 10px;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">}</span></div></div><div><br/></div><div>还可以写成</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">body {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">  div {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    color: red;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">  }</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">  h1 {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    margin-top: 10px;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">  }</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">}</span></div></div><div><br/></div><div>4.引用父类选择器</div><div><br/></div><div>可以在 Sass 嵌套中使用 &amp; 对父类选择器进行引用</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">a {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">  color: white;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">}</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">a:hover {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">  color: blue;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">}</span></div></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">a {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">  color: white;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">  &amp;:hover {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    color: blue;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">  }</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">}</span></div></div><div><br/></div><div><br/></div><div>NPM Yarm Laravel Mix</div><div><br/></div><div>1.NPM </div><div>NPM 是 Node.js 的包管理和任务管理工具</div><div>使用 NPM 安装第三方模块(  扩展包 )时 需要在 package.json 中对要安装的模块指定好名称和版本号,然后运行以下命令进行安装</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>$ npm install</div></div><div><br/></div><div>安装开始之前,npm install 命令会先检查 node_models 文件夹是否已存在要安装的模块,如果已经安装,则跳过,接着安装下一个模块,所有的第三方模块都被下载到 node_models 文件夹中 你也可以使用以下命令强制安装所有模块,不管该模块是否安装过</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>$npm install -f</div></div><div><br/></div><div>由于国内网络环境问题,我们使用 npm 命令会耗时较长,我们可以通过淘宝提供的 cnpm 镜像来解决问题 在此 Homestead 中,我们可以使用 cnpm 来替代 npm, 如安装第三方模块的时候</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>cnpm install</div></div><div><br/></div><div>处于效率考虑,我们使用更加现代化的 Yarn 来替代 NPM 的包管理功能, 然而我们仍然会使用 NPM 的任务管理功能, 如命令 npm runwatch-poll</div><div><br/></div><div>2.Yarn</div><div><br/></div><div>Yarn 是Facebook 开源的一个新的包管理器,用于替代现有的 NPM 客户端或者其他兼容 NPM 仓库的包管理工具, Yarn 在保留 NPM 原有工作流的基础上, 使之更快 更安全 更可靠 ,在后面的开发中,我们统一使用 Yarn 来替代 NPM 进行安装包的管理</div><div><br/></div><div>可以通过以下命令来安装当前项目的所有包</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>yarn install</div></div><div><br/></div><div>或者使用一种更加简洁的命令</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>yarn</div></div><div><br/></div><div>当执行 yarn install 命令时, yarn 会先判断当前文件夹中是否存在 yarn.lock 文件, 存在的话按照文件中的包版本进行安装, 否则读取 package.json 文件中的内容并发送到服务器上解析, 解析成功后把结果写入 yarn.lock 文件中,最后安装扩展包. Laravel 自带 yarn.lock 文件, 此文件的作用与 composer.json 一致, 都是为了保证项目依赖代码版本号一致而存在的.</div><div><br/></div><div>另外,我们可以通过以下命令来添加指定的包</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>yarn add [package]</div></div><div><br/></div><div>3.Laravel Mix</div><div><br/></div><div>Laravel Mix 是一款前端任务自动化管理工具,使用了工作流的模式对制定好的任务依次执行, Mix 提供了简洁流畅的 API 让你能够为你的 Laravel 应用定义 Webpack 编译任务. Mix 支持像许多常见的 CSS与 Javascript 预处理器, 通过简单的调用管理前端资源, 我们可以在 webpack.mix.js 文件中制定一些资源文件的编译, 压缩等任务. Laravel 默认生成此文件并且集成了 laravel-mix 模块</div><div><br/></div><div>webpack.mix.js</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">let mix =require('laravel-mix');</span></div><div><br/></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">mix.js('resources/assets/js/app.js', 'public/js')</span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">      .sass('resources/assets/sass/app.scss', 'public/js');</span></div></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>let mix = require('laravel-mix');</div></div><div><br/></div><div>webpack.mix.js 的解析引擎是 Node.js , 在 Node.js 中 require 关键字是对模块的引用.</div><div><br/></div><div>Mix 提供了一些函数来帮助你使用 Javascript 文件,像是编译 ECMAScript 2015, 模块编译, 压缩, 简单的合并Javacript 文件  这些都不要自定义的配置.</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>mix.js('resources/assets/js/app.js', 'public/js')</div></div><div><br/></div><div>以上这一行代码 支持</div><div>    ECMAScript 2015 语法</div><div>    Modules</div><div>    编译 .vue 文件</div><div>    针对生产环境压缩代码</div><div><br/></div><div>js 方法的第二个参数可以用来自定义生成的 JS 文件的输出目录将</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>mix.sass('resources/assets/sass/app.scss', 'public/css');</div></div><div> </div><div>sass 方法可以将 Sass 文件编译成 CSS 可以使用第二个参数来自定义生成的 CSS 的 输出目录</div><div><br/></div><div><br/></div><div><br/></div><div>开始使用 Mix</div><div><br/></div><div>首先需要命令安装1 npm 依赖</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>yarn install</div></div><div><br/></div><div>安装成功后,运行以下命令</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>npm run watch-poll</div></div><div><br/></div><div>watch-poll 会在终端中持续运行, 监控 resources 文件夹下的资源文件是否发生变化,在此米宁运行的情况下, 一旦资源文件发生变化, Webpack 会自动重新编译  </div></span>
</div></body></html> 